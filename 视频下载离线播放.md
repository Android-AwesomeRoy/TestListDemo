## 视频下载离线播放

#### 导入项目

- 所需第三方

```groovy
compile 'cn.jzvd:jiaozivideoplayer:6.+'  //视频播放控件
compile 'org.greenrobot:eventbus:3.0.0' // EventBus 事件驱动控件
compile project(':DownLoader') // 本地下载帮助module
```

#### 使用方法

1. 重写  `JZVideoPlayerStandard` 下的方法

   ```java
       @Override
       public void onVideoRendingStart() {
           super.onVideoRendingStart();
           Logger.d("已经 preparing 完毕 准备进入播放状态");
       }

       @Override
       public void onStateAutoComplete() {
           super.onStateAutoComplete();
           Logger.d("已播放完成");
       }

       @Override
       public void onStateError() {
           super.onStateError();
           Logger.d("播放错误");
       }
   ```



2. 初始化下载工具

   ```java
   // 继承Application, 重写onCreate()
   public static String VIDEO_DOWNLOAD_PATH = Environment.getExternalStorageDirectory() + "/" + Environment.DIRECTORY_DOWNLOADS + "/video"; // 定位到 Download->Video 文件夹下

   DownLoadSetting.changeFileDir(VIDEO_DOWNLOAD_PATH); // 设置下载路径
   DownloadUtils.initDataBase(this); // 初始化下载记录的数据库

   ```



3. 解析下载的资源路径



4. 下载文件

   ```java
   DownloadUtils.startDownload(上下文, URL, 文件名, 随意内容); // 初始化下载
   DownloadUtils.ReDownLoad(上下文, URL, 随意内容); // 匹配到本地文件/数据库与 JSON中URL不一致时重新下载
   ```



5. 逻辑判断
   主要是用来判断文件, 数据库, 与接口值 是否相同和存在用. 减少下载需求.